# Mongo connection
MONGODB_URI=mongodb://127.0.0.1:27017
MONGODB_DB=poe_gateway

# Used to encrypt account credentials in Mongo.
# Generate with:
# python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
FERNET_KEY=REPLACE_WITH_FERNET_KEY

# Admin API key: only for /admin/accounts/upsert and /admin/accounts
ADMIN_API_KEY=REPLACE_WITH_STRONG_ADMIN_KEY

# Service API keys (comma-separated) used by OpenAI-compatible business endpoints.
# Example:
# Authorization: Bearer svc_key_1
SERVICE_API_KEYS_BOOTSTRAP=svc_key_1,svc_key_2

# Recommended browser identity (must match cookies source browser as much as possible)
# USER_AGENT is set per account via /admin/accounts/upsert

# Gateway-level default Poe revision.
# Account-level `poe_revision` (from /admin/accounts/upsert) overrides this.
POE_REVISION=b759a4647fa291beba4792e9139bc4c014399434

# Daily Poe point reset (for depleted/cooldown recovery)
# Uses IANA timezone, e.g. America/Los_Angeles (supports DST automatically)
DAILY_RESET_TIMEZONE=America/Los_Angeles
DAILY_RESET_HOUR=0
DAILY_RESET_POINT_BALANCE=3000

# Optional tuning
MAX_INFLIGHT_PER_ACCOUNT=2
GLOBAL_INFLIGHT_LIMIT=200
DEPLETED_THRESHOLD=20
REFRESH_INTERVAL_SECONDS=600
RECENT_ACTIVE_MINUTES=120
COOLDOWN_SECONDS=120
PREWARM_CONCURRENCY=5

# Startup behavior controls:
# PREWARM_ON_STARTUP=false            # Skip account prewarm at service startup
# PREWARM_ACCOUNT_TIMEOUT_SECONDS=20  # Timeout per prewarm account
# AUTO_FETCH_POE_REVISION=false       # Skip auto-fetch from poe.com/login when POE_REVISION is empty
# POE_FETCH_CF_CLEARANCE=...          # Optional: provide Cloudflare clearance cookie for revision fetch
# POE_FETCH_PROXY=http://127.0.0.1:7897  # Optional proxy used when fetching poe-revision
# POE_FETCH_IMPERSONATE=chrome131     # curl_cffi browser fingerprint for revision fetch
